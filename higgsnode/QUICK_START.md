# Быстрый старт - HiggsNode для Windows

## Автоматическая установка (рекомендуется)

### Вариант 1: Через установочный скрипт

1. **Установите предварительные требования:**
   - [WireGuard для Windows](https://www.wireguard.com/install/) - **обязательно перезагрузите компьютер после установки**
   - [Node.js 20.x или выше](https://nodejs.org/)

2. **Запустите установку:**
   - Щелкните правой кнопкой мыши на `install.bat`
   - Выберите "Запуск от имени администратора"
   - Следуйте инструкциям на экране

   Или через PowerShell:
   ```powershell
   # Откройте PowerShell от имени администратора
   cd higgsnode
   .\install.ps1
   ```

3. **Запустите ноду:**
   - Щелкните правой кнопкой мыши на `start-node.bat`
   - Выберите "Запуск от имени администратора"

   Или через командную строку:
   ```powershell
   npm start
   ```

### Вариант 2: Установка с автоматическим запуском

```powershell
# Откройте PowerShell от имени администратора
cd higgsnode
.\install.ps1 -AutoStart
```

## Что делает скрипт установки

Скрипт `install.ps1` автоматически:

✓ Проверяет права администратора  
✓ Проверяет версию Windows  
✓ Проверяет наличие Node.js и npm  
✓ Проверяет наличие WireGuard  
✓ Проверяет сетевые интерфейсы  
✓ Устанавливает npm зависимости  
✓ Собирает проект  
✓ Создает .env файл из .env.example  
✓ Создает необходимые директории  
✓ Проверяет корректность установки  

## Первый запуск

При первом запуске нода автоматически:

1. Сгенерирует WireGuard ключи
2. Включит IP Forwarding (может потребоваться перезагрузка)
3. Настроит маршрутизацию
4. Настроит Windows Firewall
5. Зарегистрируется на BosonServer
6. Начнет принимать соединения от клиентов

## Проверка работы

После запуска проверьте:

```powershell
# Проверка IP Forwarding
Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters" -Name "IPEnableRouter"

# Проверка маршрутов
route print

# Проверка WireGuard интерфейса
wg show

# Проверка Firewall правил
netsh advfirewall firewall show rule name=all | findstr HiggsNode
```

## Устранение проблем

### Ошибка: "WireGuard не найден"
- Установите WireGuard с https://www.wireguard.com/install/
- **Обязательно перезагрузите компьютер** после установки
- Запустите скрипт установки снова

### Ошибка: "Node.js не найден"
- Установите Node.js 20.x или выше с https://nodejs.org/
- Перезапустите терминал после установки
- Запустите скрипт установки снова

### Ошибка: "Требуются права администратора"
- Щелкните правой кнопкой мыши на скрипт
- Выберите "Запуск от имени администратора"

### IP Forwarding не включается
- Убедитесь, что запускаете от имени администратора
- Перезагрузите компьютер после первого запуска
- Проверьте вручную:
  ```powershell
  Set-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters" -Name "IPEnableRouter" -Value 1 -Type DWord
  ```

## Дополнительные команды

```powershell
# Проверка статуса
npm run diagnose

# Остановка ноды
# Нажмите Ctrl+C в окне, где запущена нода

# Пересборка проекта
npm run build

# Режим разработки
npm run dev
```

## Поддержка

При возникновении проблем:
1. Проверьте логи в директории `logs/`
2. Запустите диагностику: `npm run diagnose`
3. Проверьте документацию: [WINDOWS_SETUP.md](WINDOWS_SETUP.md)

