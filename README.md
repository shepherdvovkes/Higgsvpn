# Higgs.net - –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è VPN –°–µ—Ç—å

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-20.x-green)](https://nodejs.org/)

**Higgs.net** ‚Äî —ç—Ç–æ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è VPN-—Å–µ—Ç—å, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–æ–¥–∞—Ö –∑–∞ NAT. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –Ω–æ–¥–∞–º–∏ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ relay-—Å–µ—Ä–≤–µ—Ä—ã —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ IP-–∞–¥—Ä–µ—Å–∞–º–∏.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [–î–∏–∞–≥—Ä–∞–º–º—ã —Å–∏—Å—Ç–µ–º—ã](#–¥–∏–∞–≥—Ä–∞–º–º—ã-—Å–∏—Å—Ç–µ–º—ã)
- [–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç](#–∞–Ω–∞–ª–∏–∑-–ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö-–º–µ—Å—Ç)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **BosonServer** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –ø—É–±–ª–∏—á–Ω—ã–º IP –¥–ª—è NAT traversal –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
2. **HiggsNode** ‚Äî –Ω–æ–¥–∞ –Ω–∞ –ü–ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
3. **HiggsVPN** ‚Äî –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (desktop/mobile)

### –û–±—â–∞—è —Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```mermaid
graph TB
    subgraph "–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å–µ—Ç—å"
        Client[HiggsVPN Client]
    end
    
    subgraph "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç"
        Server[BosonServer<br/>Relay & Discovery]
    end
    
    subgraph "–°–µ—Ç—å –Ω–æ–¥—ã"
        Node[HiggsNode<br/>VPN Router]
        Router[Home Router<br/>NAT]
    end
    
    subgraph "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç"
        Internet[Internet Resources]
    end
    
    Client -->|1. Request Route| Server
    Server -->|2. Route Info| Client
    Client -->|3. WebSocket Relay| Server
    Server -->|4. WebSocket Relay| Node
    Node -->|5. NAT Forwarding| Router
    Router -->|6. Internet Traffic| Internet
    Internet -->|7. Response| Router
    Router -->|8. Response| Node
    Node -->|9. WireGuard| Server
    Server -->|10. WireGuard| Client
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### BosonServer

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–¥
- NAT traversal —á–µ—Ä–µ–∑ STUN/TURN
- Relay —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –Ω–æ–¥–∞–º–∏
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### HiggsNode

–ù–æ–¥–∞ –Ω–∞ –ü–ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—ã–ø–æ–ª–Ω—è—é—â–∞—è:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ BosonServer
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ WireGuard –ø–æ—Ä—Ç–∞
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ NAT —Ç—Ä–∞—Ñ–∏–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–±–æ—Ä –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –º–µ—Ç—Ä–∏–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –ü–ö

### HiggsVPN

–ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –Ω–æ–¥–∞–º —á–µ—Ä–µ–∑ BosonServer
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è WireGuard —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

## –î–∏–∞–≥—Ä–∞–º–º—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    subgraph "BosonServer"
        API[API Gateway]
        Discovery[Discovery Service]
        Relay[Relay Service]
        Routing[Routing Service]
        Metrics[Metrics Service]
        TURN[TURN/STUN Service]
        DB[(PostgreSQL)]
        Cache[(Redis)]
    end
    
    subgraph "HiggsNode"
        NodeService[NodeService]
        WGManager[WireGuard Manager]
        RoutingEngine[Routing Engine]
        NATEngine[NAT Traversal Engine]
        MetricsCollector[Metrics Collector]
        ResourceManager[Resource Manager]
        ConnectionManager[Connection Manager]
    end
    
    subgraph "HiggsVPN Client"
        ClientApp[Client Application]
        WGClient[WireGuard Client]
        RouteOptimizer[Route Optimizer]
    end
    
    ClientApp -->|HTTP/HTTPS| API
    NodeService -->|HTTP/HTTPS| API
    API --> Discovery
    API --> Routing
    API --> Metrics
    Discovery --> DB
    Routing --> Cache
    Metrics --> DB
    Metrics --> Cache
    
    ClientApp -->|WebSocket| Relay
    NodeService -->|WebSocket| Relay
    Relay --> Cache
    
    ClientApp -->|STUN/TURN| TURN
    NodeService -->|STUN/TURN| TURN
    
    ClientApp -->|WireGuard| WGClient
    WGClient -->|WebSocket Relay| Relay
    Relay -->|WebSocket Relay| WGManager
    WGManager --> RoutingEngine
    RoutingEngine --> NATEngine
    NATEngine -->|Internet| ResourceManager
    ResourceManager --> MetricsCollector
    MetricsCollector -->|Metrics| API
```

### 2. –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–¥—ã –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

```mermaid
sequenceDiagram
    participant Node as HiggsNode
    participant Server as BosonServer
    participant Client as HiggsVPN
    participant STUN as STUN Server
    participant Internet as Internet
    
    Note over Node,Internet: –§–∞–∑–∞ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–¥—ã
    Node->>STUN: STUN Binding Request
    STUN-->>Node: Mapped Address
    Node->>Server: POST /api/v1/nodes/register
    Server-->>Node: Session Token, Relay Servers
    
    Note over Node,Internet: –§–∞–∑–∞ 2: Heartbeat
    loop –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        Node->>Server: POST /api/v1/nodes/:id/heartbeat
        Server-->>Node: Status OK
    end
    
    Note over Node,Internet: –§–∞–∑–∞ 3: –ó–∞–ø—Ä–æ—Å –º–∞—Ä—à—Ä—É—Ç–∞ –∫–ª–∏–µ–Ω—Ç–æ–º
    Client->>Server: POST /api/v1/routing/request
    Server->>Server: –í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –Ω–æ–¥—ã
    Server-->>Client: Route Info, Session ID
    
    Note over Node,Internet: –§–∞–∑–∞ 4: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ Relay —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    Client->>Server: WebSocket Connect (WSS)
    Server-->>Client: Connection Confirmed
    Node->>Server: WebSocket Connect (WSS)
    Server-->>Node: Connection Confirmed
    
    Note over Node,Internet: –§–∞–∑–∞ 5: –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
    Client->>Server: WireGuard Packet (WebSocket)
    Server->>Node: WireGuard Packet (WebSocket)
    Node->>Internet: NAT Forwarding
    Internet-->>Node: Response
    Node->>Server: WireGuard Packet (WebSocket)
    Server->>Client: WireGuard Packet (WebSocket)
```

### 3. –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```mermaid
classDiagram
    class BosonServer {
        -discoveryService: DiscoveryService
        -relayService: RelayService
        -routingService: RoutingService
        +registerNode(nodeData): Node
        +getRoute(clientId, requirements): Route
        +relayPacket(sessionId, packet): void
    }
    
    class DiscoveryService {
        -nodeRegistry: NodeRegistry
        -heartbeatManager: HeartbeatManager
        +registerNode(nodeData): Node
        +updateHeartbeat(nodeId): void
        +getAvailableNodes(): Node[]
    }
    
    class RelayService {
        -sessionManager: SessionManager
        -websocketRelay: WebSocketRelay
        +createSession(nodeId, clientId): Session
        +relayPacket(sessionId, packet): void
        +closeSession(sessionId): void
    }
    
    class RoutingService {
        -routeSelector: RouteSelector
        -loadBalancer: LoadBalancer
        +selectRoute(requirements): Route
        +updateRouteMetrics(routeId, metrics): void
    }
    
    class HiggsNode {
        -nodeService: NodeService
        -wireGuardManager: WireGuardManager
        -routingEngine: RoutingEngine
        -natTraversalEngine: NatTraversalEngine
        +start(): void
        +stop(): void
        +handleClientPacket(packet): void
    }
    
    class NodeService {
        -apiClient: ApiClient
        -connectionManager: ConnectionManager
        +register(): void
        +sendHeartbeat(): void
        +handleRelayPacket(packet): void
    }
    
    class RoutingEngine {
        -wireGuardManager: WireGuardManager
        -physicalInterface: NetworkInterface
        +enableNat(): void
        +disableNat(): void
        +forwardPacket(packet): void
    }
    
    class NatTraversalEngine {
        -stunClient: StunClient
        -portForwardingService: PortForwardingService
        +discoverExternalAddress(): Address
        +attemptHolePunching(remoteAddress): boolean
    }
    
    BosonServer --> DiscoveryService
    BosonServer --> RelayService
    BosonServer --> RoutingService
    DiscoveryService --> NodeRegistry
    RelayService --> SessionManager
    RoutingService --> RouteSelector
    HiggsNode --> NodeService
    HiggsNode --> RoutingEngine
    HiggsNode --> NatTraversalEngine
    NodeService --> ApiClient
    RoutingEngine --> WireGuardManager
```

### 4. –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```mermaid
graph TB
    subgraph "Production Environment"
        subgraph "Load Balancer"
            LB[NGINX/HAProxy]
        end
        
        subgraph "BosonServer Cluster"
            BS1[BosonServer 1<br/>Node.js + Docker]
            BS2[BosonServer 2<br/>Node.js + Docker]
            BS3[BosonServer 3<br/>Node.js + Docker]
        end
        
        subgraph "Database Cluster"
            PG1[(PostgreSQL<br/>Primary)]
            PG2[(PostgreSQL<br/>Replica)]
            REDIS[(Redis<br/>Cluster)]
        end
        
        subgraph "Monitoring"
            PROM[Prometheus]
            GRAF[Grafana]
        end
        
        subgraph "TURN Servers"
            TURN1[coturn Server 1]
            TURN2[coturn Server 2]
        end
    end
    
    subgraph "User Networks"
        NODE1[HiggsNode 1<br/>User PC]
        NODE2[HiggsNode 2<br/>User PC]
        NODE3[HiggsNode N<br/>User PC]
    end
    
    subgraph "Clients"
        CLIENT1[HiggsVPN Client 1]
        CLIENT2[HiggsVPN Client 2]
        CLIENTN[HiggsVPN Client N]
    end
    
    LB --> BS1
    LB --> BS2
    LB --> BS3
    
    BS1 --> PG1
    BS2 --> PG1
    BS3 --> PG1
    PG1 --> PG2
    
    BS1 --> REDIS
    BS2 --> REDIS
    BS3 --> REDIS
    
    BS1 --> PROM
    BS2 --> PROM
    BS3 --> PROM
    PROM --> GRAF
    
    BS1 --> TURN1
    BS2 --> TURN2
    
    NODE1 --> LB
    NODE2 --> LB
    NODE3 --> LB
    
    CLIENT1 --> LB
    CLIENT2 --> LB
    CLIENTN --> LB
```

### 5. –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö (Data Flow)

```mermaid
flowchart LR
    subgraph "Client Side"
        C1[Client App]
        C2[WireGuard Interface]
        C3[WebSocket Client]
    end
    
    subgraph "BosonServer"
        S1[API Gateway]
        S2[Relay Service]
        S3[Session Manager]
        S4[Routing Service]
    end
    
    subgraph "Node Side"
        N1[WebSocket Client]
        N2[WireGuard Interface]
        N3[Routing Engine]
        N4[NAT Engine]
        N5[Physical Interface]
    end
    
    subgraph "Internet"
        I1[Internet Resources]
    end
    
    C1 -->|1. Request Route| S1
    S1 -->|2. Route Selection| S4
    S4 -->|3. Session Creation| S3
    S3 -->|4. Session Info| C1
    
    C1 -->|5. Connect| C3
    C3 -->|6. WSS Connect| S2
    S2 -->|7. WSS Connect| N1
    
    C2 -->|8. WG Packet| C3
    C3 -->|9. WebSocket| S2
    S2 -->|10. WebSocket| N1
    N1 -->|11. WG Packet| N2
    N2 -->|12. Packet| N3
    N3 -->|13. NAT| N4
    N4 -->|14. Forward| N5
    N5 -->|15. Internet| I1
    
    I1 -->|16. Response| N5
    N5 -->|17. Response| N4
    N4 -->|18. NAT| N3
    N3 -->|19. Packet| N2
    N2 -->|20. WG Packet| N1
    N1 -->|21. WebSocket| S2
    S2 -->|22. WebSocket| C3
    C3 -->|23. WG Packet| C2
```

---

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)

#### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ NAT –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ NAT –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª–∞ iptables –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```bash
iptables -t nat -A POSTROUTING -o ${wireguardInterface} -j MASQUERADE
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
PHYSICAL_IF=$(ip route | grep default | awk '{print $5}' | head -1)

# NAT –æ—Ç WireGuard –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
iptables -t nat -A POSTROUTING -i ${WIREGUARD_IF} -o ${PHYSICAL_IF} -j MASQUERADE

# –†–∞–∑—Ä–µ—à–∏—Ç—å forwarding –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
iptables -A FORWARD -i ${WIREGUARD_IF} -o ${PHYSICAL_IF} -j ACCEPT
iptables -A FORWARD -i ${PHYSICAL_IF} -o ${WIREGUARD_IF} -m state --state RELATED,ESTABLISHED -j ACCEPT
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ùå –¢—Ä–∞—Ñ–∏–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚ùå –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º
- ‚ùå –û–±—Ä–∞—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–∞–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ NAT –ø—Ä–∞–≤–∏–ª (–æ—Ç WireGuard –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É)
- –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ WireGuard –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- WireGuard –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, –Ω–æ –æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è default gateway –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ùå –ü–∞–∫–µ—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ç–µ—Ä—è—é—Ç—Å—è
- ‚ùå –î–∞–∂–µ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º NAT —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚ùå –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å packet forwarding handler
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å route table management
- –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ default gateway

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (Root/Administrator)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–î–ª—è —Ä–∞–±–æ—Ç—ã VPN –Ω–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Linux capabilities –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ root
- –°–æ–∑–¥–∞—Ç—å systemd service —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å polkit –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∞–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –î–ª—è Windows: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UAC elevation —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)

#### 4. –î–≤–æ–π–Ω–æ–π NAT (Double NAT)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–æ–≥–¥–∞ HiggsNode –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ NAT —Ä–æ—É—Ç–µ—Ä–∞, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –¥–≤–æ–π–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è –£–≤–µ–ª–∏—á–µ–Ω–∏–µ latency
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ (FTP, SIP, –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã)
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UPnP/IGD –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ NAT-PMP (macOS/iOS)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å port forwarding –≤—Ä—É—á–Ω—É—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TURN relay –¥–ª—è –æ–±—Ö–æ–¥–∞ NAT

#### 5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å WebSocket Relay

**–ü—Ä–æ–±–ª–µ–º–∞:**
–¢—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ WebSocket relay, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç overhead –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç latency.

**–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:**
- WebSocket overhead: ~14 –±–∞–π—Ç –Ω–∞ —Ñ—Ä–µ–π–º
- JSON encoding –¥–ª—è control messages
- Base64 encoding –¥–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ relay —Å–µ—Ä–≤–µ—Ä

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è –£–≤–µ–ª–∏—á–µ–Ω–∏–µ latency –Ω–∞ 50-200ms
- ‚ö†Ô∏è –°–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ 5-10%
- ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ WebSocket —Ñ—Ä–µ–π–º—ã –≤–º–µ—Å—Ç–æ base64
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å packet batching –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è overhead
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (UDP Hole Punching)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TURN –≤–º–µ—Å—Ç–æ WebSocket –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 6. –ü—Ä–æ–±–ª–µ–º—ã —Å MTU (Maximum Transmission Unit)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ WebSocket –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ MTU.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç latency
- ‚ö†Ô∏è –°–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ MTU (Path MTU Discovery)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MTU –¥–ª—è WireGuard –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å —É—á–µ—Ç–æ–º WebSocket overhead
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ MTU –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫

#### 7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

**–ü—Ä–æ–±–ª–µ–º–∞:**
HiggsNode –≤–∏–¥–∏—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚ö†Ô∏è –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –Ω–æ–¥

**–†–µ—à–µ–Ω–∏–µ:**
- Zero-knowledge –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –Ω–æ–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –≤–∏–¥–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- End-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–æ–≤–µ—Ä—Ö WireGuard
- –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ - —á–µ—Ç–∫–æ–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –±–µ–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

#### 8. –ü—Ä–æ–±–ª–µ–º—ã —Å DNS

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Ç —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ DNS –∑–∞–ø—Ä–æ—Å–æ–≤.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è DNS –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –∏–¥—Ç–∏ –º–∏–º–æ VPN (DNS leak)
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –≥–µ–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é

**–†–µ—à–µ–Ω–∏–µ:**
- DNS interception - –ø–µ—Ä–µ—Ö–≤–∞—Ç DNS –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –Ω–æ–¥–µ
- DNS forwarding - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã
- DNS over HTTPS/TLS - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DoH/DoT
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –≤ WireGuard –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

### üü¢ –£–ª—É—á—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)

#### 9. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ firewall –ø—Ä–∞–≤–∏–ª–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª iptables/pfctl –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ü–µ–ø–æ—á–∫—É iptables –¥–ª—è HiggsNode
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- Graceful cleanup - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª

#### 10. –ü—Ä–æ–±–ª–µ–º—ã —Å IPv6

**–ü—Ä–æ–±–ª–µ–º–∞:**
–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ IPv4.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É IPv6 NAT (NAT66 –∏–ª–∏ NPTv6)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å IPv6 forwarding
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ dual-stack –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

#### 11. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:**
- Traffic shaping —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `tc` (Linux)
- Per-client rate limiting
- Connection limits –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
- QoS –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞

#### 12. –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ —Å–±–æ—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ —Å–±–æ–µ –Ω–æ–¥—ã –ø—Ä–∞–≤–∏–ª–∞ iptables –∏ –º–∞—Ä—à—Ä—É—Ç—ã –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- Graceful shutdown - –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- Signal handlers - –æ–±—Ä–∞–±–æ—Ç–∫–∞ SIGTERM, SIGINT –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
- Health checks - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- Cleanup scripts - —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20.x –∏–ª–∏ –≤—ã—à–µ
- Docker –∏ Docker Compose (–¥–ª—è BosonServer)
- WireGuard (–¥–ª—è HiggsNode –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤)
- –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞/root (–¥–ª—è HiggsNode)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ BosonServer

```bash
cd bosonserver
docker-compose up -d
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [bosonserver/README.md](bosonserver/README.md)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ HiggsNode

```bash
cd higgsnode
npm install
npm run build
sudo npm start
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [higgsnode/README.md](higgsnode/README.md)

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](ARCHITECTURE.md) - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- [–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö](PROTOCOL.md) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ API
- [–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º VPN](VPN_ISSUES_ANALYSIS.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
- [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é](IMPROVEMENT_RECOMMENDATIONS_IMPORTANT.md) - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](bosonserver/API.md) - REST API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

‚ö†Ô∏è **–ü—Ä–æ–µ–∫—Ç –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**

–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –∏–º–µ–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –∏ NAT, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤ production –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π. –°–º. —Ä–∞–∑–¥–µ–ª [–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç](#–∞–Ω–∞–ª–∏–∑-–ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö-–º–µ—Å—Ç) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

1. **–§–∞–∑–∞ 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ):** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ NAT –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
2. **–§–∞–∑–∞ 2 (–í–∞–∂–Ω–æ):** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–§–∞–∑–∞ 3 (–£–ª—É—á—à–µ–Ω–∏—è):** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE) —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** [https://github.com/shepherdvovkes/Higgsvpn](https://github.com/shepherdvovkes/Higgsvpn)
- **Issues:** [GitHub Issues](https://github.com/shepherdvovkes/Higgsvpn/issues)

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –î–µ–∫–∞–±—Ä—å 2024*

